<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Viking.js</title>
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <meta name="viewport" content="width=device-width">
    <link href='http://fonts.googleapis.com/css?family=Raleway:400,300,100,700' rel='stylesheet' type='text/css'>
    
    <link rel="stylesheet" href="/assets/application-6c49fb305842d72fb57cd2b5ce3aba86.css">

</head>
<body>
    <div class="header">
        <div class="header-container">
            <div class="logo">
                <img src="/assets/viking.js-4d47385f38057e6d6d539581619eedee.png" title="Viking.js" height=100 width=350 />
                <div class="tagline">Pillage your servers</div>
            </div>
        </div>
    </div>
    <div class="intro">
    Viking.js is an open-source web framework for JavaScript. Built on
    Backbone.js, it makes it easier to write client side JavaScript applications.
</div>

<div class="downloads">
    <a class="btn outline" href="https://github.com/malomalo/viking/">Github</a>
    <a class="btn green" href="https://github.com/malomalo/viking/releases/download/0.7.0/viking.js"><span class="icon">&#xe602;</span>Download 0.7.0</a>
</div>

<div class="docs">
    <div class="docs-container">
        <h2>Getting Started</h2>
        
        <p class="center">
            Viking.js makes it easy to work with Rails and REST APIs. It attempts
            to follow the philosophies of
            <a href="http://rubyonrails.org/">Ruby On Rails</a>.
        </p>
        
        
        <h3>Installation</h3>
        <div class="section">
            <div class="notes">
                <p>
                    The following libraries are required for Viking.js
                </p>
        
                <ul class="links">
                    <li><a href="http://jquery.com/"><span class="icon">&#xe603;</span> jQuery</a></li>
                    <li><a href="http://github.com/samsonjs/strftime"><span class="icon">&#xe603;</span>strftime</a></li>
                    <li><a href="http://underscorejs.org/"><span class="icon">&#xe603;</span>Underscore.js</a></li>
                    <li><a href="https://github.com/jeremyruppel/underscore.inflection"><span class="icon">&#xe603;</span>Underscore.Inflection</a></li>
                    <li><a href="http://backbonejs.org/"><span class="icon">&#xe603;</span>Backbone.js</a></li>
                </ul>
            </div>
            <div class="code">
<div class="highlight"><pre><code class="html"><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;/jquery.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;/strftime.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;/underscore.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;/underscore.inflection.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;/backbone.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;/viking.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre></div>
            </div>
        </div>
        

        <h3>Models</h3>
        <div class="section">
            <div class="notes">
                <p>
                    <code>Viking.Model</code> extends
                    <a href="http://backbonejs.org/#Model">Backbone.Model</a> adding
                    naming, associations, data type coerions, selection, and modifies
                    sync to work with <a href="http://rubyonrails.org/">Ruby on Rails</a>
                    out of the box.
                </p>
                <p>&nbsp;</p>
                <p>
                    Your are not required to pass a name. In this example the name
                    <code>"ship"</code> allows Viking automatically read and build the associations
                    and generate any urls.
                </p>
                <p>
                    The coercions take care of serializing to and from JSON as well as
                    converting attributes to the appropriate type when they are set.
                </p>
            </div>
            <div class="code">
<div class="highlight"><pre><code class="javascript"><span class="nx">Ship</span> <span class="o">=</span> <span class="nx">Viking</span><span class="p">.</span><span class="nx">Model</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="s1">&#39;ship&#39;</span><span class="p">,</span> <span class="p">{</span>
    
    <span class="nx">coercions</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;String&#39;</span><span class="p">,</span>
        <span class="nx">size</span><span class="o">:</span> <span class="s1">&#39;Number&#39;</span><span class="p">,</span>
        <span class="nx">roles</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;String&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">array</span><span class="o">:</span> <span class="kc">true</span><span class="p">}],</span>
        <span class="nx">attributes</span><span class="o">:</span> <span class="s1">&#39;JSON&#39;</span><span class="p">,</span>
        <span class="nx">last_serviced_at</span><span class="o">:</span> <span class="s1">&#39;Date&#39;</span><span class="p">,</span>
        <span class="nx">operational</span><span class="o">:</span> <span class="s1">&#39;Boolean&#39;</span>
    <span class="p">},</span>
    
    <span class="nx">belongsTo</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;fleet&#39;</span><span class="p">],</span>
    
    <span class="nx">hasMany</span><span class="o">:</span> <span class="p">[[</span><span class="s1">&#39;sailors&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">model</span><span class="o">:</span> <span class="s1">&#39;Human&#39;</span><span class="p">}]],</span>
    
    <span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
            </div>
        </div>
        
        <h4>Associations</h4>
        <div class="section">
            <div class="notes">
                <p>
                    <code>belongsTo</code> takes and array of names for the
					associations. By default a <code>get('fleet')</code> in the
					example would return <code>undefined</code> on a new instance
					of the model.
                </p>
                <p>
                    You can set the fleet with the normal <code>set</code> function
					or through the inital attributes. Both accept either an model
					or the attributes used to construct the model.
                </p>
            </div>
            <div class="code">
<div class="highlight"><pre><code class="javascript"><span class="nx">Ship</span> <span class="o">=</span> <span class="nx">Viking</span><span class="p">.</span><span class="nx">Model</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="s1">&#39;ship&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">belongsTo</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;fleet&#39;</span><span class="p">]</span>
<span class="p">});</span>
</code></pre></div>
            </div>
        </div>
        <div class="section">
            <div class="notes">
                <p>
                    If the model name is different than the association name you can
                    pass the model name as an option.
                </p>
            </div>
            <div class="code">
<div class="highlight"><pre><code class="javascript"><span class="nx">belongsTo</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;village&#39;</span><span class="p">];</span>
<span class="c1">// or</span>
<span class="nx">belongsTo</span><span class="o">:</span> <span class="p">[[</span><span class="s1">&#39;owner&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">model</span><span class="o">:</span> <span class="s1">&#39;Village&#39;</span><span class="p">}]];</span>
</code></pre></div>
            </div>
        </div>
        <div class="section">
            <div class="notes">
                <p>
                    Viking also supports polymorphic relations in a similar
					fashion to Rails. If you specify <code>polymorphic: true</code>
					in the options of a <code>belongsTo</code> relation.
                </p>
				<p>
					In the example when setting or initalizing the model, if 
					<code>subject</code> is a normal Javascript Object Viking
					will look for <code>subject_type</code> in the attributes to
					know what type of model <code>subject</code> needs to
					instantiated as.
				</p>
				<p>
					When setting or initalizing the model, if <code>subject</code>
					is a Viking.Model then <code>subject_type</code> will be set
					to the modelName of the value.
				</p>
            </div>
            <div class="code">
<div class="highlight"><pre><code class="javascript"><span class="nx">Model</span> <span class="o">=</span> <span class="nx">Viking</span><span class="p">.</span><span class="nx">Model</span><span class="p">.</span><span class="nx">except</span><span class="p">({</span>
	<span class="nx">belongsTo</span><span class="o">:</span> <span class="p">[[</span><span class="s1">&#39;subject&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">polymorphic</span><span class="o">:</span> <span class="kc">true</span><span class="p">}]];</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">model</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Model</span><span class="p">({</span>
	<span class="nx">subject_type</span><span class="o">:</span> <span class="s1">&#39;ship&#39;</span><span class="p">,</span>
	<span class="nx">subject</span><span class="o">:</span> <span class="p">{</span><span class="nx">callsign</span><span class="o">:</span> <span class="s1">&#39;TREX&#39;</span><span class="p">}</span>
<span class="p">});</span>
<span class="nx">model</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;subject&#39;</span><span class="p">).</span><span class="nx">modelName</span> <span class="k">instanceof</span> <span class="nx">Ship</span> <span class="c1">// =&gt; true</span>

<span class="nx">model</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;subject&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Car</span><span class="p">())</span>
<span class="nx">model</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;subject_type&#39;</span><span class="p">)</span> <span class="c1">// =&gt; &#39;car&#39;</span>
</code></pre></div>
            </div>
        </div>
        
        <div class="section">
            <div class="notes">
                <p>
                    <code>hasMany</code> relationships are similar except they
                    default to an empty collection. By default a
                    <code>get('ships')</code> in the example above would return
                    a <code>ShipCollection</code> on a new instance of the model.
                </p>
                <p>
                  // TODO: talk about setting a collection
                </p>
            </div>
            <div class="code">
<div class="highlight"><pre><code class="javascript"><span class="nx">Fleet</span> <span class="o">=</span> <span class="nx">Viking</span><span class="p">.</span><span class="nx">Model</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="s1">&#39;fleet&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">hasMany</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;ships&#39;</span><span class="p">]</span>
<span class="p">});</span>
</code></pre></div>
            </div>
        </div>
        <div class="section">
            <div class="notes">
                <p>
                    If the collection or model name is different than the
                    association name you can pass the model name as an option.
                </p>
            </div>
            <div class="code">
<div class="highlight"><pre><code class="javascript"><span class="nx">hasMany</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;ships&#39;</span><span class="p">];</span>
<span class="c1">// =&gt; uses `ShipCollection`</span>

<span class="nx">hasMany</span><span class="o">:</span> <span class="p">[[</span><span class="s1">&#39;ships&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">model</span><span class="o">:</span> <span class="s1">&#39;Ship&#39;</span><span class="p">}]];</span>
<span class="c1">// =&gt; uses `ShipCollection`</span>

<span class="nx">hasMany</span><span class="o">:</span> <span class="p">[[</span><span class="s1">&#39;ships&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">collection</span><span class="o">:</span> <span class="s1">&#39;Ships&#39;</span><span class="p">}]];</span>
<span class="c1">// =&gt; uses `Ships`</span>
</code></pre></div>
            </div>
        </div>
        
        <h4>Single Table Inheritance</h4>
        <div class="section">
            <div class="notes">
                <p>
                    <code>Viking.Model</code> supports Single table inheritance
                    in a similar fashion to <a href="http://api.rubyonrails.org/classes/ActiveRecord/Base.html#label-Single+table+inheritance">Rails' STI</a>.
                </p>
                <p>&nbsp;</p>
                <p>
                    <code>Viking.Model</code> allows inheritance by storing the
                    name of the model in the <code>type</code> attribute (can be
                    changed by setting <code>inheritanceAttribute</code> on the
                    model).
                </p>
                <p>
                    In the example when you do
                    <code>new Destroyer({name: "37signals"})</code>, the object
                    will have the <code>type</code> attribute set to
                    <code>"destroyer"</code>.
                </p>
                <p>
                    // TODO: mention about Ship.all returning all STI models and
                    // Destroyer.all returning Destroyers and GuidedMissileDestroyers
                </p>
                <p>
                    // TODO: mention about changing the `type` and perhaps
                    // implement the becomes method internally
                </p>
            </div>
            <div class="code">
<div class="highlight"><pre><code class="javascript"><span class="nx">Ship</span> <span class="o">=</span> <span class="nx">Viking</span><span class="p">.</span><span class="nx">Model</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="s1">&#39;ship&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">hasMany</span><span class="o">:</span> <span class="p">[[</span><span class="s1">&#39;sailors&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">model</span><span class="o">:</span> <span class="s1">&#39;Human&#39;</span><span class="p">}]],</span>
<span class="p">});</span>

<span class="nx">Destroyer</span> <span class="o">=</span> <span class="nx">Ship</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="s1">&#39;destroyer&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">hasMany</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;guns&#39;</span><span class="p">,</span> <span class="s1">&#39;torpedos&#39;</span><span class="p">],</span>
<span class="p">});</span>

<span class="nx">GuidedMissileDestroyer</span> <span class="o">=</span> <span class="nx">Destroyer</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="s1">&#39;guided_missile_destroyer&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">hasMany</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;missles&#39;</span><span class="p">],</span>
<span class="p">});</span>
</code></pre></div>
            </div>
        </div>


        <h3>Collections</h3>
        <div class="section">
            <div class="notes">
                <p>
                    <code>Viking.Collection</code> extends
                    <a href="http://backbonejs.org/#Collection">Backbone.Collection</a>,
                    adding predicates, selections, and modifies fetch to cancel any
                    current request if a new fetch is triggered.
                </p>
            </div>
            <div class="code">
<div class="highlight"><pre><code class="javascript"><span class="nx">FleetCollection</span> <span class="o">=</span> <span class="nx">Viking</span><span class="p">.</span><span class="nx">Collection</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
    <span class="nx">model</span><span class="o">:</span> <span class="nx">Ship</span>
<span class="p">});</span>
</code></pre></div>
            </div>
        </div>
        <div class="section">
            <div class="notes">
                <p>
                    You can attach a predicate to a collection.
                </p>
                <p>
                    If a predicate is set it's paramaters will be passed under the
                    <code>where</code> key when querying the server. When the predicate changes
                    the collection is re-fetched.
                </p>
                <p>
                    To remove a predeicate call <code>#setPredicate</code> with a falsey value.
                </p>
            </div>
            <div class="code">
<div class="highlight"><pre><code class="javascript"><span class="kd">var</span> <span class="nx">fleet</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FleetCollection</span><span class="p">({</span><span class="nx">predicate</span><span class="o">:</span> <span class="p">{}});</span>

<span class="c1">// or</span>
<span class="kd">var</span> <span class="nx">predicate</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Viking</span><span class="p">.</span><span class="nx">Predicate</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">fleet</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FleetCollection</span><span class="p">({</span><span class="nx">predicate</span><span class="o">:</span> <span class="nx">predicate</span><span class="p">});</span>

<span class="c1">// triggers a fetch and includes {type: &#39;battleship&#39;} in the query params</span>
<span class="nx">predicate</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="s1">&#39;battleship&#39;</span><span class="p">);</span>
</code></pre></div>
            </div>
        </div>
        <div class="section">
            <div class="notes">
                <h4>Paginated Collections</h4>
                <p>
                    In addition if you want paginate your results you can also use a
                    <code>Viking.PaginatedCollection</code>
                </p>
                <p>
                    A <code>Viking.PaginatedCollection</code> expects the response from the server
                    to be similar to the example.
                </p>
                <p>
                    The paginated collection will have a <code>Viking.Cursor</code>
                    available at <code>collection.curosr</code>. Any changes to the
                    attributes <code>page</code>, <code>offset</code>, or
                    <code>per_page</code> will trigger a fetch on the collection.
                </p>
        
                <p>
                    The cursor has several helper functions to allow you to navigate.
                    The functions are <code>reset</code>, <code>incrementPage</code>,
                    <code>decrementPage</code>, and <code>goToPage</code>.
                </p>
            </div>
            <div class="code">
<div class="highlight"><pre><code class="javascript"><span class="nx">FleetCollection</span> <span class="o">=</span> <span class="nx">Viking</span><span class="p">.</span><span class="nx">PaginatedCollection</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
    <span class="nx">model</span><span class="o">:</span> <span class="nx">Ship</span>
<span class="p">});</span>
</code></pre></div>
<div class="highlight"><pre><code class="javascript"><span class="p">{</span>
    <span class="nx">page</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nx">offset</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">per_page</span><span class="o">:</span> <span class="mi">25</span><span class="p">,</span>
    <span class="nx">total_pages</span><span class="o">:</span> <span class="mi">479</span><span class="p">,</span>
    <span class="nx">total</span><span class="o">:</span> <span class="mi">11974</span><span class="p">,</span>
    <span class="nx">count</span><span class="o">:</span> <span class="mi">25</span><span class="p">,</span>
    <span class="nx">ships</span><span class="o">:</span> <span class="p">[</span>
        <span class="c1">// ...</span>
    <span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
            </div>
        </div>

        <h3>Controllers</h3>
        <div class="section">
            <div class="notes">
                <p>routers...</p>
            </div>
            <div class="code">
<div class="highlight"><pre><code class="html">//TODO
</code></pre></div>
            </div>
        </div>


        <h3>Templates</h3>
        <div class="section">
            <div class="notes">
                <p>rendering...</p>
            </div>
            <div class="code">
<div class="highlight"><pre><code class="html">//TODO
</code></pre></div>
            </div>
        </div>


        <h3>Views</h3>
        <div class="section">
            <div class="notes">
                <p>coming...</p>
            </div>
            <div class="code">
<div class="highlight"><pre><code class="html">//TODO
</code></pre></div>
            </div>
        </div>


        <h3>Form</h3>
        <div class="section">
            <div class="notes">
                <p>routers...</p>
            </div>
            <div class="code">
<div class="highlight"><pre><code class="html">[[ formFor(listing, function(f) { ]]
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;section&quot;</span><span class="nt">&gt;</span>
        [[= f.label(&#39;address&#39;) ]]
        [[= f.textField(&#39;address&#39;)]]

        [[= f.label(&#39;space_type&#39;) ]]
        [[= f.select(&#39;space_type&#39;, [&quot;lease&quot;, &quot;sublease&quot;]) ]]
    <span class="nt">&lt;/div&gt;</span>
[[ }) ]]
</code></pre></div>
            </div>
        </div>


        <h3>Loading data from a server</h3>
        <div class="section">
            <div class="notes">
                <p>coming...</p>
            </div>
            <div class="code">
<div class="highlight"><pre><code class="html">//TODO
</code></pre></div>
            </div>
        </div>

        <h3>Errors</h3>
        <div class="section">
            <div class="notes">
                <p>coming...</p>
            </div>
            <div class="code">
<div class="highlight"><pre><code class="html">//TODO
</code></pre></div>
            </div>
        </div>

        <h3>Support</h3>
        <div class="section">
            <div class="notes">
                <p>coming...</p>
            </div>
            <div class="code">
<div class="highlight"><pre><code class="html">//TODO
</code></pre></div>
            </div>
        </div>
    </div>
</div>


<div class="footer">
    <div class="footer-container">
        <h2>Contributors</h2>
        <p>
            Viking.js is open source tool created for use at <a href="http://42floors.com">42Floors</a>.
        </p>
        <p>
            Please report bugs on the <a href="https://github.com/malomalo/viking/issues">GitHub issues page</a>.
        </p>
                  <div class="contributor">
            <a href="https://github.com/malomalo">
              <img src="https://avatars.githubusercontent.com/u/716?">
              <span class="name">malomalo</span>
            </a>
          </div>
          <div class="contributor">
            <a href="https://github.com/bemky">
              <img src="https://avatars.githubusercontent.com/u/841033?">
              <span class="name">bemky</span>
            </a>
          </div>
          <div class="contributor">
            <a href="https://github.com/waratuman">
              <img src="https://avatars.githubusercontent.com/u/18227?">
              <span class="name">waratuman</span>
            </a>
          </div>
          <div class="contributor">
            <a href="https://github.com/orangejulius">
              <img src="https://avatars.githubusercontent.com/u/111716?">
              <span class="name">orangejulius</span>
            </a>
          </div>

        <h2>Licensing</h2>
        <p>
            Viking.js is released under the
            <a href="http://en.wikipedia.org/wiki/MIT_License">MIT License</a>
        </p>
    </div>
</div>


</body>
</html>
